# linux

# 某一个业务中现在需要生成全局唯一的递增 ID, 并发量非常大

- 雪花算法 snowflake 

 snowflake 是由 Twitter 公司提出的一种全局唯一 ID 生成算法，它具有“递增态势、不依赖数据库、高性能”等特点，自 snowflake 推出以来备受欢迎，算法被应用于大大小小公司的服务中。snowflake 高位为时间戳的二进制，遂完全受到时间戳的影响，倘若时间回拨（当前服务器时间回到之前的某一时刻），那么 snowflake 有极大概率生成与之前同一时刻的重复 ID，这直接影响整个业务。
 
 snowflake 受时间戳影响，使用上限不超过 70 年。
 
 - 薄雾算法 Mist 
 
    薄雾算法不受时间戳影响，受到数值大小影响。结果值不可预测.
 
    - 为什么薄雾算法不受时间回拨影响？
    snowflake 受时间回拨影响的根本原因是高位采用时间戳的二进制值，而薄雾算法的高位是按序递增的数值。结果值的大小由高位决定，遂薄雾算法不受时间回拨影响。
 
    - 为什么说薄雾算法的结果值不可预测？
    考虑到“不可预测”的要求，薄雾算法的中间位是 8 位随机值，且末 8 位是也是随机值，两组随机值大大增加了预测难度，因此称为结果值不可预测。

   结合redis使用
   
# LSM 树了解吗? 是一种什么存储结构?

Log-Structured Merge Tree，牺牲读性能换取性能，RocksDB、HBase、Cassandra 都在用

LSM数的数据更新是日志式的，当一条数据更新是直接append一条更新记录完成的。这样设计的目的就是为了顺序写，不断地将Immutable MemTable flush到持久化存储即可，而不用去修改之前的SSTable中的key，保证了顺序写。